let page,demo_datas={is_guest:!1,login:{title:"Pardn Chiu",password:""},title:"PARDN 管理後台",left:{is_body_left_min:getCookie("is_body_left_min")||0,is_database_list:0,is_database_edit:0,is_demo_article_editor:0,is_demo_folder:0,is_demo_text:0,is_demo_json:0}};const system_events={body_left_show:function(e){const t=document.querySelector("section.system-block-body-left");null!=t&&(t.dataset.show=parseInt(t.dataset.show)?0:1)},body_left_type:function(e){const t=document.querySelector("section.system-block-body-left");if(null==t)return;const a=parseInt(t.dataset.min);t.dataset.min=a?0:1,addCookie("is_body_left_min",a?0:1)},tab_show:function(e){const t=e.target,a=t.parentElement,s=parseInt(t.dataset.show);null!=a.querySelector("a[data-selected='1']")&&(isNaN(s)||s)?this.dataset.show=0:this.dataset.show=s?0:1}},demo_events={show:function(){const e=this.$parent(0).$$class("show");this.__class("fa-solid "+(e?"fa-eye-slash":"fa-eye")),this.$pre(0).$child(0).type=e?"password":"text",this.$parent(0).$$class_(e,"show")},login:function(){page.dom.$child(0)._class("show"),setTimeout((()=>{page.data.is_guest=!1}),1e3)},logout:function(){page.data.is_guest=!0}};let textInputErrorTimer;const textInput=e=>{const t=e.target,a=t.parentElement.parentElement,s=t.dataset.type??t.type??"text",n=t.dataset.wrap??"1",r=t.dataset.force??"1",l=!("0"===n),o=/\n/.test(t.value),u="1"===r;let i=t.dataset.max,c=t.dataset.min;switch(s){case"text":!l&&o&&(t.value=t.value.replace(/\n/g,""),a.dataset.error=1,clearTimeout(textInputErrorTimer),textInputErrorTimer=setTimeout((e=>{a.dataset.error=0}),1e3)),t.nextElementSibling.innerHTML=t.value.replace(/\n/g,"<br>");break;case"account":var d=/[^\w]/g;u&&(t.value=t.value.replace(/\s/g,"").replace(d,""));const e=d.test(t.value);a.dataset.error=e?1:0,a.dataset.message=e?"僅接受半形英文 / 數字 / 底線":"";break;case"number":d=/[^\d\-\.]/g;(u||i||c)&&(t.value=t.value.replace(/\s/g,"").replace(d,"")),a.dataset.error=d.test(t.value)?1:0;break;case"email":(d=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/).test(t.value)||(a.dataset.error=1,a.dataset.message="內容不符合EMAIL格式.",clearTimeout(textInputErrorTimer),textInputErrorTimer=setTimeout((e=>{a.dataset.error=0,a.dataset.message=""}),1e3));break;case"password":d=/[^\w\!\"\#\$\%\&\'\(\)\*\+\,\-\.\/\:\;\<\=\>\?\@\[\\\]\^\`\{\|\}\~\ ]/;u&&(t.value=t.value.replace(/\s/g,"").replace(d,"")),a.dataset.error=d.test(t.value)?1:0,a.dataset.message=d.test(t.value)?"內容包含不支持的字符.":""}if(null!=i||null!=c)if(i=isNaN(i)?null:parseFloat(i),c=isNaN(c)?null:parseFloat(c),"number"===s){if(/^\-/.test(t.value)&&1===t.value.length||/\.$/.test(t.value)||t.value.length<1)return;t.value=Math.max(c,Math.min(i,parseFloat(t.value)))}else{null!=i&&t.value.length>i&&(t.value=t.value.slice(0,i));var m=null!=c&&t.value.length;"1"===a.dataset.error&&m?(console.log(a.dataset.error,m,c,t.value.length,"1"===a.dataset.error&&m,a.dataset.message),a.dataset.message=a.dataset.message+(t.value.length<c?" / 最小長度為 "+c:"")):m&&(a.dataset.error=t.value.length<c?1:0,a.dataset.message=t.value.length<c?"最小長度為 "+c:"")}},hasgtagKeyup=e=>{if("Enter"!==e.key)return;const t=e.target;let a=(t.value||"").match(/[#＃\,，\n\ ]+([\w\u4e00-\u9fa5\u3105-\u3129\u31A0-\u31B7\u3040-\u30FF\u3130-\u318F\uAC00-\uD7AF]+)/g)||t.value.split(/\s/),s=new Map;if(a.length<1)return;for(let e=0,t=a[e];e<a.length;e++,t=a[e]){const e=t.replace(/[#＃\,，\n\ ]/g,"").slice(0,24);e.length<2||s.set(e,0)}let n=Array.from(s.keys());n.length>0?(t.value=`#${n.join(" #")} #`.trim(),t.nextElementSibling.innerHTML=t.value.replace(/\n/g,"<br>")):(t.value="#",t.nextElementSibling.innerHTML="#")};function addCookie(e,t,a){if(!{string:1,number:1}[typeof e]||String(e).trim().length<1||null==t)return;e=encodeURIComponent(e),a=1e3*("number"==typeof a?a:3600);const s=Date.now(),n=new Date(s+a);return t="object"==typeof t?JSON.stringify(t).trim():String(t).trim(),t=encodeURIComponent(t),document.cookie=`${e}=${t}; expires=${n.toUTCString()}; path=/;`,document.cookie}function getCookie(e){if(!{string:1,number:1}[typeof e]||String(e).trim().length<1)return;const t=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)"),a=document.cookie.match(t)||[];if(a.length<1)return;let s=a[1];s=decodeURIComponent(s);try{s=JSON.parse(s)}catch(e){return}return s}const keys="abcdefghijklmnopqrstuvwxyz0123456789";let keyMap=new Map;function uniqueID(e=64){let t="";for(let a=0;a<e;a++)t+=keys[_charAt]($Math[_floor](36*$Math[_random]()));return t}